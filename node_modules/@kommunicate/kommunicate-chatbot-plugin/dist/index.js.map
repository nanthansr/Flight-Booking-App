{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["let Kommunicate = {};\n\nfunction isValidObject(object){\n    return object && Object.keys(object).length && object.constructor === Object\n};\n\nKommunicate.init = (appId, options) => {\n    let environment;\n    let scriptSource = \"https://widget.kommunicate.io/v2/kommunicate.app\";\n    if(!appId) {\n        console.info('Please provide appId to initialize the widget');\n        return;\n    };\n    if(typeof appId !== 'string'){\n        console.info('AppId should be string');\n        return;\n    };\n    let settings = {\n        \"appId\": appId,\n        \"popupWidget\": true,\n        \"automaticChatOpenOnNavigation\": true,\n    };\n\n    if(isValidObject(options)){\n        if(options && options.environment){\n            environment = options.environment;\n            delete options.environment;\n        }\n        settings = {\n            ...settings,\n            ...options\n        }\n    };\n    \n    switch (environment){\n        case \"test\":\n            scriptSource = \"https://widget-test.kommunicate.io/v2/kommunicate.app\";\n            break;\n        case \"local\":\n            scriptSource = \"http://localhost:3030/v2/kommunicate.app\";\n            break;\n        default:\n            scriptSource = \"https://widget.kommunicate.io/v2/kommunicate.app\";\n            break;\n    };\n    \n    (function(d, m){\n        var kommunicateSettings = settings;\n        var s = document.createElement(\"script\"); s.type = \"text/javascript\"; s.async = true;\n        s.src = scriptSource;\n        var h = document.getElementsByTagName(\"head\")[0]; h.appendChild(s);\n        window.kommunicate = m; m._globals = kommunicateSettings;\n    })(document, window.kommunicate || {});\n}\n\nexport default Kommunicate;\n"],"names":["Kommunicate","isValidObject","object","Object","keys","length","constructor","init","appId","options","environment","scriptSource","console","info","settings","d","m","kommunicateSettings","s","document","createElement","type","async","src","h","getElementsByTagName","appendChild","window","kommunicate","_globals"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,IAAIA,WAAW,GAAG,EAAlB;;AAEA,SAASC,aAAT,CAAuBC,MAAvB,EAA8B;AAC1B,SAAOA,MAAM,IAAIC,MAAM,CAACC,IAAP,CAAYF,MAAZ,EAAoBG,MAA9B,IAAwCH,MAAM,CAACI,WAAP,KAAuBH,MAAtE;AACH;;AAEDH,WAAW,CAACO,IAAZ,GAAmB,UAACC,KAAD,EAAQC,OAAR,EAAoB;AACnC,MAAIC,WAAJ;AACA,MAAIC,YAAY,GAAG,kDAAnB;;AACA,MAAG,CAACH,KAAJ,EAAW;AACPI,IAAAA,OAAO,CAACC,IAAR,CAAa,+CAAb;AACA;AACH;;AACD,MAAG,OAAOL,KAAP,KAAiB,QAApB,EAA6B;AACzBI,IAAAA,OAAO,CAACC,IAAR,CAAa,wBAAb;AACA;AACH;AACD,MAAIC,QAAQ,GAAG;AACX,aAASN,KADE;AAEX,mBAAe,IAFJ;AAGX,qCAAiC;AAHtB,GAAf;;AAMA,MAAGP,aAAa,CAACQ,OAAD,CAAhB,EAA0B;AACtB,QAAGA,OAAO,IAAIA,OAAO,CAACC,WAAtB,EAAkC;AAC9BA,MAAAA,WAAW,GAAGD,OAAO,CAACC,WAAtB;AACA,aAAOD,OAAO,CAACC,WAAf;AACH;;AACDI,IAAAA,QAAQ,gBACDA,QADC,EAEDL,OAFC,CAAR;AAIH;;AAED,UAAQC,WAAR;AACI,SAAK,MAAL;AACIC,MAAAA,YAAY,GAAG,uDAAf;AACA;;AACJ,SAAK,OAAL;AACIA,MAAAA,YAAY,GAAG,0CAAf;AACA;;AACJ;AACIA,MAAAA,YAAY,GAAG,kDAAf;AACA;AATR;;AAYA,GAAC,UAASI,CAAT,EAAYC,CAAZ,EAAc;AACX,QAAIC,mBAAmB,GAAGH,QAA1B;AACA,QAAII,CAAC,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAR;AAA0CF,IAAAA,CAAC,CAACG,IAAF,GAAS,iBAAT;AAA4BH,IAAAA,CAAC,CAACI,KAAF,GAAU,IAAV;AACtEJ,IAAAA,CAAC,CAACK,GAAF,GAAQZ,YAAR;AACA,QAAIa,CAAC,GAAGL,QAAQ,CAACM,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAAR;AAAkDD,IAAAA,CAAC,CAACE,WAAF,CAAcR,CAAd;AAClDS,IAAAA,MAAM,CAACC,WAAP,GAAqBZ,CAArB;AAAwBA,IAAAA,CAAC,CAACa,QAAF,GAAaZ,mBAAb;AAC3B,GAND,EAMGE,QANH,EAMaQ,MAAM,CAACC,WAAP,IAAsB,EANnC;AAOH,CA/CD;;;;"}